## پرامپت ۱
ساخت اپلیکیشن تحت وب نقشه ذهنی (Mind Map) با جاوا اسکریپت خالص و پشتیبانی کامل از زبان فارسی (RTL)

شما یک توسعه‌دهنده وب متخصص هستید. وظیفه شما ساخت یک اپلیکیشن وب کامل، کاربردی و کاربرپسند برای ایجاد نقشه‌های ذهنی (Mind Map) است.

**نیازمندی‌های اصلی:**

1.  **فناوری‌ها:** فقط از **جاوا اسکریپت خالص (vanilla)**، **HTML5** و **CSS3** استفاده کنید. **نباید از هیچ کتابخانه یا فریم‌ورک خارجی** مانند jQuery، React، Vue، Angular یا هرگونه کتابخانه آماده برای ساخت نقشه ذهنی استفاده شود.
2.  **پشتیبانی از زبان فارسی و RTL:** کل رابط کاربری و تجربه کاربری باید برای زبان‌های **راست‌چین (RTL)**، به‌ویژه فارسی، بهینه‌سازی شود. جهت ورود متن، نمایش آن و چیدمان کلی صفحه باید به‌طور پیش‌فرض راست‌چین باشد.

**لطفاً کد کامل را در سه بلوک مجزا و با کامنت‌گذاری مناسب ارائه دهید:**
1.  `index.html`: ساختار اصلی HTML.
2.  `style.css`: تمام کدهای CSS برای استایل‌دهی، با ظاهری تمیز و مدرن و پیاده‌سازی کامل چیدمان RTL.
3.  `script.js`: تمام منطق برنامه با استفاده از جاوا اسکریپت خالص. برای سازماندهی بهتر کد، از ویژگی‌های جدیدتر جاوا اسکریپت (ES6+) مانند کلاس‌ها (Classes) استفاده کنید.


**مشخصات و ویژگی‌های دقیق:**
- بخش اصلی که به عنوان بوم نقشه‌ذهنی عمل می‌کند.
- یک نوار ابزار ساده شامل یک دکمه برای افزودن شاخه جدید به گره انتخاب‌شده
    - اطمینان حاصل کنید که تمام عناصر در جریان راست‌چین به درستی نمایش داده می‌شوند.
- گره‌ها را به صورت جعبه‌های مستطیلی با گوشه‌های گرد، پس‌زمینه روشن و سایه ملایم طراحی کنید.
    - گره‌ای که انتخاب شده است باید استایل متفاوتی داشته باشد (مثلاً رنگ حاشیه آن تغییر کند).
- طراحی کلی باید ساده، مدرن و کاربرپسند باشد. از یک فونت خوانای فارسی مانند «وزیرمتن» (Vazirmatn) یا فونت‌های استاندارد سیستمی استفاده کنید.
- راه‌اندازی اولیه: هنگام بارگذاری صفحه، کلاس `MindMap` باید یک **گره مرکزی** (مثلاً با متن «موضوع اصلی») ایجاد 
- با کلیک روی هر گره، آن گره باید به عنوان «انتخاب‌شده» علامت‌گذاری شود.
- افزودن گره: زمانی که یک گره انتخاب شده است، با کلیک روی دکمه «افزودن شاخه»، یک گره فرزند جدید به آن متصل شود.
        - گره جدید باید در نزدیکی والد خود نمایش داده شود.
- ویرایش متن گره: با **دابل کلیک (double-click)** روی یک گره، متن آن باید قابل ویرایش شود.
  - فشردن کلید `Enter` یا کلیک کردن در بیرون از کادر ویرایش، متن جدید ذخیره شود.
- **حذف گره:** یک دکمه کوچک «×» روی هر گره (به جز گره مرکزی) قرار دهید.
        - با کلیک روی این دکمه، آن گره و **تمام گره‌های زیرمجموعه‌اش** باید حذف شوند.
- کشیدن و رها کردن گره (Drag and Drop): کاربر باید بتواند هر گره‌ای را با ماوس بکشد و در نقطه دیگری از صفحه رها کند تا موقعیت آن را تغییر دهد.
        - هنگامی که یک گره والد جابجا می‌شود، تمام فرزندان و خطوط اتصال آن نیز باید همراهش جابجا شوند.
- ترسیم خطوط اتصال (Connectors): برای اتصال گره والد به فرزندانش از **خطوط SVG** استفاده کنید.
  - این خطوط باید به صورت پویا همراه با گره‌ها ایجاد، به‌روزرسانی و حذف شوند. مختصات خط (`x1`, `y1`, `x2`, `y2`) باید با هر بار جابجایی گره‌ها آپدیت شود.

خروجی نهایی:
    * کد باید کاملاً کاربردی و آماده اجرا باشد؛ طوری که با ساخت سه فایل (`index.html`, `style.css`, `script.js`) و باز کردن فایل HTML در مرورگر، به درستی کار کند.
    * لطفاً بخش‌های پیچیده کد جاوا اسکریپت، به‌ویژه منطق مربوط به کشیدن و رها کردن و همچنین ترسیم خطوط SVG را با کامنت توضیح دهید.


## پرامپت ۲
من نمی‌خوام از هیچ فریم‌ورکی مثل react استفاده بشه، پس داخل پروژه نباید هیچ فایلی با پسوندهای ts و tsx وجود داشته باشه.

## پرامپت ۳
ویژگی‌های زیر را اضافه کن:
1. در گره انتخاب شده با زدن دکمه tab شاخه جدید ایجاد بشه
2. در گره انتخاب شده با زدن دکمه F2 امکان ویرایش نام فراهم بشه
3. در گره انتخاب شده با زدن دکمه Delete گره و فرزندان آن حذف بشن.

## پرامپت ۴
در گره اصلی با اضافه شدن گره‌های جدید تمامی گره‌ها در یک طرف ایجاد می‌شن، در حالیکه باید در هر دو طرف گره اضافه بشن.

## پرامپت ۵
امکان بزرگ‌نمایی و کوچک‌نمایی با استفاده از کلید وسط ماوس را اضافه کن.

## پرامپت ۶
امکان جمع‌شوندگی را به گره‌ها اضافه کن.

## پرامپت ۷
تغییرات زیر را انجام بده:
1. گزینه x را از گره‌ها حذف کن
2. گزینه جمع‌شوندگی را با توجه به اینکه گره‌های فرزند کدوم سمت هستند قرار بگیرند. (سمت راست یا چپ)

## پرامپت ۸
امکان ذخیره‌سازی نقشه‌های ذهنی را با ویژگی‌های زیر پیاده‌سازی کن:
1. فایل‌ها را در indexedDB ذخیره کن. 
2. هر فایل‌ها به صورت markdown ذخیره بشه.
3. ذخیره‌سازی در مارک‌داون هم به صورت لیست‌نامرتب تودرتو باشه.
4. در سمت راست پنلی ایجاد کن تا فایل‌ها ذخیره شده نمایش داده بشن.
5. امکان حذف، ویرایش نام، دانلود فایل وجود داشته باشه.
6. پنل قابلیت نمایش و مخفی شدن داشته باشه.

## پرامپت ۹
نقشه‌های ذهنی به صورت خودکار ذخیره بشن.

## پرامپت ۱۰
در پنل فایل‌ها یک منوی قرار بده و تمامی دکمه‌ها را در اون قرار بده. گزینه‌ای جدید به نام «ویژگی‌ها» اضافه کن و تاریخ ایجاد و آخرین ویرایش و نام فایل رو در اون قرار بده.

## پرامپت ۱۱
منوی کشویی فهرست‌فایل‌ها فقط بخشی از سمت راستش نمایش داده می‌شه و باقی منو نمایش داده نمی‌شه.

## پرامپت ۱۲
مشکل بر طرف نشده و منوی کشویی هنوز ناقص نمایش داده می‌شه.

## پرامپت ۱۳
در منوی بالای صفحه موارد زیر را اضافه کن:
1. گزینه حذف گره را اضافه کن
2. به جای متن در دکمه‌ها از آیکون استفاده کن.
3. دو دکمه نقشه جدید و ذخیره را با یک خط افقی از دو دکمه دیگه جدا کن

منو ساده و کمینه (minimal) باشه.

## پرامپت ۱۴
ویژگی‌های واگرد و ازنو را به پروژه اضافه کن. آیکون‌ها رو هم به نوار ابزار اضافه کن.

یادت باشه دکمه‌های ctrl+z و ctrl+y رو هم اضافه کنی.

## پرامپت ۱۵
تغییرات زیر را اعمال کن:
1. راهنما قابل بسته شدن باشه، با زدن دکمه بسته شدن یک آیکون آیکون کوچک جای آن نمایش داده شود.
2. اگر فایل به صورت خودکار ذخیره شده، دکمه ذخیره غیرفعال بشه.
3. اندازه نوار ابزار را کوچک‌تر کن.

## پرامپت ۱۶
در نوار ابزار ویژگی‌های زیر را اضافه کن:
1. امکان تغییر حاشیه هر گره: مستطیل، بیضی، خط (زیر متن) و بدون حاشیه
2. امکان تغییر خط اتصال گره‌ها: خی منحنی، خط شکسته و …

## پرامپت ۱۷
اندازه، رنگ و فرم دکمه‌های نوار ابزار دقیقا مشابه دکمه راهنما باشه.

## پرامپت ۱۸
تغییرات زیر را انجام بده:
1.  بخش راهنما دکمه بستن روی واژه «راهنما» قرار گرفته، به سمت چپ منتقلش کن.
2.  گره‌ها را کوچک‌تر کن
3. فاصله بین گره‌ها را کم‌تر کن
4. اگر یک گره فقط یک فرزند داره، فرزند مقابل گره باشه.

## پرامپت ۱۹
دکمه نمایش منوی سمت راست به سمت چپ بالای خود منو چسبیده بشه و زمانی که منو مخفی شده، فقط همون دکمه نمایش داده بشه.

## پرامپت ۲۰
در پنل سمت راست، بخش ویرایشگر راست به چپ (RTL) بشه. و بخش style هم در ویرایشگر نمایش داده نشه.

## پرامپت ۲۱
در بخش ویرایشگر تغییرات زیر را اعمال کن:
1. با زدن دکمه enter به صورت خودکار نویسه - درج بشه
2. با استفاده از دکمه tab تورفتگی اضافه بشه. (برای ایجاد گره فرزند)
3. با زدن دکمه‌های shift+tab تورفتگی کاهش پیدا کنه.

## پرامپت ۲۲
اگر برای گره‌ها حاشیه خط و بدون حاشیه انتخاب بشه، خط‌های اتصال تا وسط متن نمایش داده می‌شن و بر روی متن می‌افتن.

## پرامپت ۲۳
ویژگی‌های زیر را اضافه کن:
1. با زدن دکمه‌های ctrl+a همه گره‌ها انتخاب بشن.
2. با گرفتن کلید ctrl بشه چندتا گره را انتخاب کرد.
3. با کلیدهای up arrow و down arrow بشه بین گره‌های بالا و پایین که در یک سطح هستند جابجا شد.
4. با کلیدهای right arrow و left arrow امکان جابجایی بین گره‌ها به سمت چپ یا راست امکان پذیر باشه.

## پرامپت ۲۴
مشکلات زیر را بر طرف کن:
1. گزینه‌ ctrl+a زمانی کیبورد فارسی باشه کار نمی‌کنه.
2. ویژگی انتخاب چند گره با ctrl کار نمی‌کنه
3. کارکرد right arrow و left arrow برعکس هست.
4. پیمایش به چپ و راست باید تا انتهای نقشه‌ذهنی ادامه داشته بشه نه اینکه در گره ریشه متوقف بشه.

## پرامپت ۲۵
تغییرات زیر را اعمال کن:
1. اندازه جمع کننده گره را به نصف کاهش بده
2. دکمه جمع کننده منو سمت راست را به طور کامل به منو بچسبون، از مربع استفاده کن.

## پرامپت ۲۶
مشکلات زیر را بر طرف کن:
1. با انتخاب یک فایل از فهرست فایل‌ها منو بسته می‌شود، اما زمانی منو باید بسته بشه که کاربر روی دکمه جمع‌شونده منو کلیک کنه.
2. با انتخاب یک گره با کلیک بر روی هر جای صفحه که خالی باشه باید از حالت انتخاب خارج بشه.
3. با انتخاب یک گره به جای اینکه حاشیه اون رو پر رنگ کنی رنگ پس‌زمینه را تغییر بده تا بهتر مشخص بشه.

## پرامپت ۲۷
در حاشیه زیر خط رنگ پس‌زمینه گره انتخاب شده تغییر نمی‌کند.

## پرامپت ۲۸
در نوار ابزار در کنار دکمه «نقشه‌ذهنی جدید» دکمه بارگذاری را اضافه کن تا کاربر بتونه فایلی با پسوند مارک‌داون بارگذاری کنه.
اگر قالب فایل سازگار نبود پیام مناسب نمایش بده.

## پرامپت ۲۹
به جای استفاده از مدال‌های پیش‌فرض مرورگر یک مدال با طرح مناسب ایجاد کن.
1. ویرایش نام فایل
2. تاییدیه حذف فایل
3. پیام فرمت نادرست فایل بارگذاری شده

## پرامپت ۳۰
یک فایل READM.md ایجاد کن و اطلاعات زیر را به فارسی بنویس:
1. یک نام مناسب برای پروژه انتخاب کن
2. در حد سه خط درباره پروژه توضیح بده
3. بنویس که این پروژه توسط تو نوشته شده
4. ویژگی‌های پروژه رو بنویس
5. محوز رو هم MIT قرار بده

## پرامپت ۳۱
در نوار ابزار گزینه‌ای اضافه کن که با انتخاب گسترش نقشه‌ذهنی از سمت راست به چپ بشه (یکطرفه)

## پرامپت ۳۲
اگر در ابتدا چیدمان دو طرفه باشه و بعد اون رو به یک طرفه (از راست به چپ) تغییر کنه، گره‌های رده سوم به درستی به سمت راست منتقل نمی‌شن و فقط گره‌های رده دوم که بعد از گره ریشه هستن به درستی به راست منتقل می‌شن.

## پرامپت ۳۳
در انتهای بخش راهنما موارد زیر را اضافه کن:
1. نام پروژه: «ذهن‌نگار»
2. شماره نسخه: 1.0.0
3. لوگوی گیت‌هاب که به آدرس پروژه متصله: https://github.com/alirho/mindmap

## پرامپت ۳۴
امکان نوشتن فرمت‌بندی‌های مارک‌دوانی زیر را به متن‌های داخل گره‌ها اضافه کن:
1. پررنگ (bold)
2. کج (italic)
3. پیوند (link)
4. خط زده
5. کد تک‌خطی (code)

## پرامپت ۳۵
در نوار ابزار یک دکمه برای افزودن شکلک (emoji) اضافه کن، تا کاربر بتونه درون هر گره شکلکی می‌خواد وارد کنه. از کتابخانه زیر برای شکلک‌ها استفاده کن:
emoji-picker-element

## پرامپت ۳۶
پنجره نمایش شکلک‌ها همیشه زیر آیکون نوار ابزار نمایش داده بشه، نه زیر گره‌ها.